"use strict";$(document).ready(function(){for(var eventsForStyle=["load","resize"],i=0;i<eventsForStyle.length;i++)window.addEventListener(eventsForStyle[i],function(){var vh=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(vh,"px"))});$(".sidebarBtn").click(function(){$("#sidebar").toggleClass("show"),$(this).toggleClass("toggled")});var $flowchart=$("#chart"),$container=$flowchart.parent(),$lastEvent=($(".draggable_operator"),$(".sidebar__log")),cx=($(".sidebar__log"),$flowchart.width()/2),cy=$flowchart.height()/2,possibleZooms=[.5,.75,1,2],currentZoom=.5;$flowchart.panzoom(),$flowchart.panzoom("pan",-cx+$container.width()/2,-cy+$container.height()/2),$container.on("mousewheel.focal",function(e){e.preventDefault();var delta=e.delta||e.originalEvent.wheelDelta||e.originalEvent.detail,zoomOut=delta?delta<0:e.originalEvent.deltaY>0;currentZoom=Math.max(0,Math.min(possibleZooms.length-1,currentZoom+(2*zoomOut-1))),$flowchart.flowchart("setPositionRatio",possibleZooms[currentZoom]),$flowchart.panzoom("zoom",possibleZooms[currentZoom],{animate:!0})}),$(window).on("resize",function(){$flowchart.panzoom("resetDimensions"),$flowchart.panzoom("pan",-cx+$container.width()/2,-cy+$container.height()/2)}),$("#resetZoom").on("click",function(){$flowchart.panzoom("pan",-cx+$container.width()/2,-cy+$container.height()/2),$flowchart.panzoom("zoom",.5,{animate:!0})}),$flowchart.flowchart({canUserMoveOperators:!1,canUserEditLinks:!1,linkWidth:3,multipleLinksOnInput:!0,multipleLinksOnOutput:!0,verticalConnection:!0,linkVerticalDecal:0,defaultLinkColor:"#2CACDE",defaultSelectedLinkColor:"#245B8F",onOperatorSelect:function(operatorId){var txt;return txt='<div class="log"> <div class="log-title"><span>Select '.concat(operatorId,".</span>\n        ").concat($flowchart.flowchart("getOperatorTitle",operatorId),'</div>\n        <div class="log-desc">').concat($flowchart.flowchart("getOperatorData",operatorId).info.description,'</div>\n        <div class="log-stats">\n          Last time, this point viewed <span> ').concat($flowchart.flowchart("getOperatorData",operatorId).info.numb," </span> time.\n        </div>\n        </div>"),$lastEvent.html(txt),console.log($flowchart.flowchart("getOperatorData",operatorId)),!0}});$.get("/api/poolList",function(data){console.log(data);for(var container=$("#poolList"),_i=0;_i<data.length;_i++){var el=data[_i],block='\n          <div class="list-group-item list-group-item-action d-flex justify-content-between flex-row align-items-center p-0  '.concat(el.status?"busy"+el.status+"</small>":"",'" >\n            <button onclick="$.get(\'').concat(el.link,'\',function (data) {$(\'#chart\').flowchart(\'setData\', data)}, \'json\')" class="list-group-item-button" style="color: inherit">\n              <div class="d-flex w-100 alighn-items-center flex-column">\n                <h6 class="mb-1 d-flex">').concat(el.name,"</h6>\n                ").concat(el.description?'<small class="d-flex">'+el.description+"</small>":"",'\n              </div>\n              <i class="load-spin fas fa-spinner d-flex align-items-center"></i>\n            </button>\n            <form enctype="multipart/form-data" method="POST" action="#" class="d-flex flex-column justify-content-center p-2">\n              <label class="btn btn-light m-0">\n                <input type="file" name="csv" id="" hidden onchange="this.form.submit();">\n                  CSV load\n              </label>\n            </form>\n          </div>\n          ');container.append(block)}},"json"),$(function(){$('[data-toggle="tooltip"]').tooltip()}),$("#createNewPool").click(function(){var name=$("#newPoolName").val(),desc=$("#newPoolDescription").val();if(!name)return alert("Please, set a pool name!"),!1;$("#poolList").append('\n      <div class="list-group-item list-group-item-action d-flex justify-content-between flex-row align-items-center p-0  >\n        <button class="list-group-item-button" style="color: inherit">\n          <div class="d-flex w-100 alighn-items-center flex-column">\n            <h6 class="mb-1 d-flex">'.concat(name,"</h6>\n            ").concat(desc,'\n          </div>\n          <i class="load-spin fas fa-spinner d-flex align-items-center"></i>\n        </button>\n        <div class="d-flex flex-column justify-content-center p-2">\n          <label class="btn btn-light m-0">\n            <input type="file"  id="" hidden>\n              CSV load\n          </label>\n        </div>\n      </div>\n      ')),$.get("/api/poolCreate?name=".concat(name,"&description=").concat(desc),function(data){alert(data)})})});